# 数据库设计文档

## 概述
- 使用 MySQL 存储用户、算法元数据、运行记录与收藏。
- 初期可仅保存输入与参数；步骤序列由前端重算或压缩后存储（可选）。

## 表结构（草案）
### users
- `id BIGINT PK AUTO`、`username VARCHAR(64) UNIQUE`、`email VARCHAR(128) UNIQUE`、`password_hash VARCHAR(255)`、`role ENUM('ADMIN','USER')`、`created_at DATETIME`。

### algorithms
- `id BIGINT PK AUTO`、`key VARCHAR(64) UNIQUE`、`name VARCHAR(128)`、`category ENUM('SORT','GRAPH','TREE','HEAP')`、`description TEXT`、`enabled TINYINT`。

### runs
- `id BIGINT PK AUTO`、`user_id BIGINT FK`、`algorithm_id BIGINT FK`、`input_json JSON`、`params_json JSON`、`step_count INT`、`duration_ms INT`、`created_at DATETIME`。

### favorites
- `id BIGINT PK AUTO`、`user_id BIGINT FK`、`algorithm_id BIGINT FK`、`created_at DATETIME`。

### 可选 run_steps
- `run_id BIGINT FK`、`idx INT`、`step_json JSON`（大数据量建议对象存储或压缩）。

## 索引与约束
- `users.username`/`users.email` 唯一索引；
- `algorithms.key` 唯一索引；
- `runs.user_id`、`runs.algorithm_id` 外键关联（应用层可延迟约束）。

## 连接配置（占位）
- `spring.datasource.url=jdbc:mysql://localhost:3306/algovis?useSSL=false&serverTimezone=UTC&characterEncoding=utf8`
- `spring.datasource.username=root`
- `spring.datasource.password=changeme`
- `spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver`